{% extends 'metadata_editor/workflow_editor.html' %}
{% load static %}

{# Registration-specific editor scripts #}
{% block registration_scripts %}
{% include 'register_with_support/components/registration_scripts.html' %}
{{ api_specification_validation_url|json_script:'api-specification-validation-url' }}
<script src="{% static 'register_with_support/workflow_new_registration_editor_setup.js' %}" type="module"></script>
{% endblock registration_scripts %}

{# Add organisation field #}
{% block name_section %}
{% include 'register_with_support/new_name_and_organisation_section.html' %}
{% endblock name_section %}

{# Add localID and namespace fields #}
{% block identifier_section %}
{% include 'register_with_support/sections/new_identifier_section.html' %}
{% endblock identifier_section %}

{# OpenAPI editor section #}
{% block open_api_section %}
<hr class="my-5">
<section id="api-interaction-method-section">
    <div class="row gy-4">
        <div class="col-lg-12">
            <h2 class="mb-0">Link to an OpenAPI Specification</h2>
        </div>
        <div class="col-xl-9 col-lg-12">
            {% with field=form.api_specification_url %}
            {% include 'metadata_editor/components/form_field_template.html' %}
            {% endwith %}
            {% include 'register/components/open_api_specification_url_validation_subsection.html' %}
        </div>
        <div class="col-xl-9 col-lg-12">
            {% with field=form.api_description %}
            {% include 'metadata_editor/components/form_field_template.html' %}
            {% endwith %}
        </div>
    </div>
</section>
{% endblock open_api_section %}

{# TOC link to name and organisation section #}
{% block name_toc_list_item_link %}
<a href="#name-and-organisation-section">Full Name and Organisation</a>
{% endblock name_toc_list_item_link %}

{# TOC link to OpenAPI wizard section #}
{% block open_api_toc_list_item %}
<li class="list-group-item">
    <a href="#api-interaction-method-section">
        Link to an OpenAPI Specification
    </a>
</li>
{% endblock open_api_toc_list_item %}